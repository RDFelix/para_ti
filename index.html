<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Para ti</title>
    <link rel="shortcut icon" href="icon.png" type="image/x-icon">
</head>
<style>
    body{
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background-color: rgb(127, 176, 172);
        font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        color: rgb(45, 45, 45);
        scale: 0.5;
        padding: 30px;
    }

    svg{
        color: rgb(45, 45, 45);
    }

    button{
        border: 0px;
        background-color: rgba(0, 0, 0, 0);
    }

    .centro{
        background-color: rgb(172, 113, 26);
        width: 150px;
        height: 150px;
        border-radius: 50%;
        position: absolute;
        box-shadow: 0px 0px 50px rgb(99, 66, 15);
        animation: 1s iniciar ease-in-out;
    }

    .tallo{
        background-color: rgb(10, 145, 10);
        width: 20px;
        height: 200px;
        transform: translateY(150px);
        animation: 1s iniciar_2 ease-in-out;
    }

    .contenedor{
        transform-style: preserve-3d;
        transform: rotate3d(1, 0, 100, 45deg);
    }

    .petalos{
        animation: aparecer 2s ease-in-out;
        background-color: rgb(248, 196, 32);
        border-radius: 50%;
        box-shadow: 0px 0px 50px rgb(186, 186, 18);
        position: absolute;
    }

    .semilla{
        background-color: rgb(156, 103, 23);;
        width: 4px;
        height: 4px;
        rotate: 45deg;
        position: absolute;
        animation: aparecer_2 .3s ease-in-out;
        box-shadow: 0px 0px 1px rgb(128, 84, 20);
    }

    @keyframes aparecer{
        0% {opacity: 0; transform: translate(150px, 250px);}
        50% {transform: translate(0px, 0px);}
        100% {opacity: 1; transform: translate(0px, 100px);}
    }

    @keyframes aparecer_2{
        0% {opacity: 0;}
        100% {opacity: 1;}
    }

    @keyframes iniciar{
        0% {scale: 0;}
        100% {scale: 1;}
    }

    @keyframes iniciar_2{
        0% {height: 0px; transform: translate(0px, 0px);}
        100% {height: 200px; transform: translate(0px, 150px);}
    }
</style>
<body>
    
    <main style="display: flex; justify-content: center; align-items: center;">
        <div style="box-shadow: 0px 0px 200px rgba(60, 83, 82, 0.554); background-color: white; border: 10px solid rgb(45, 45, 45);">
            <section style="border: 10px solid rgb(45, 45, 45); background-color: rgb(127, 176, 172); margin: 40px 40px 10px 40px; width: 500px; height: 500px; display: flex; justify-content: center; align-items: center;">
                <div class="tallo"></div>
                <article id="contenedor" class="contenedor" style="position: absolute; display: flex; justify-content: center; align-items: center;">
                </article>
                <div class="centro" id="centro">
                    <div id="semillas" style="position: absolute;"></div>
                </div>
            </section>
            <section style="margin: 0px 40px 20px 40px;">
                <article style="padding: 10px 0px;">
                    <div style="display: flex; align-items: center;">
                        <div id="indicador" style="position: absolute; background-color: rgb(45, 45, 45); border-radius: 50%; width: 20px; height: 20px;"></div>
                        <div style="background-color: rgb(45, 45, 45); width: 100%; height: 5px;"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <p id="tiempo">00:00</p>
                        <p id="duracion"></p>
                    </div>
                    <audio id="cancion" src="flores_amarillas.mp3"></script>
                </article>
                <article style="margin-bottom: 10px; display: flex; align-items: center; justify-content: space-between;">
                    <div>
                        <p style="padding: 0px; margin: 0px; font-size: 30px; font-weight: bold;">Esto es para ti</p>
                        <p style="padding: 0px; margin: 0px;">Muchas gracias por soportarme</p>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314"/>
                    </svg>
                </article>
                <article style="display: flex; justify-content: center;">
                    <div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-skip-start-fill" viewBox="0 0 16 16">
                            <path d="M4 4a.5.5 0 0 1 1 0v3.248l6.267-3.636c.54-.313 1.232.066 1.232.696v7.384c0 .63-.692 1.01-1.232.697L5 8.753V12a.5.5 0 0 1-1 0z"/>
                        </svg>

                        <button type="button" id="icono" onclick="cambiar()"></button>
                        
                        <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-skip-end-fill" viewBox="0 0 16 16">
                            <path d="M12.5 4a.5.5 0 0 0-1 0v3.248L5.233 3.612C4.693 3.3 4 3.678 4 4.308v7.384c0 .63.692 1.01 1.233.697L11.5 8.753V12a.5.5 0 0 0 1 0z"/>
                        </svg>
                    </div>
                </article>
            </section>
        </div>
    </main>
</body>
<script>
    const x = 100;
    const y = 0;
    const w = 40;
    const h = 70;
    const petalCount = 360 / 40;

    const contenedor = document.getElementById("contenedor");
    const semillas = document.getElementById("centro");
    const audio = document.getElementById("cancion");
    const radioInicial = 0;
    const angulo = 137.5;

    let index = 0;
    let radio = radioInicial;

    const elementoTiempo = document.getElementById("tiempo");
    const elementoDuracion = document.getElementById("duracion");

    function formatearTiempo(segundos) {
        const minutos = Math.floor(segundos / 60);
        const segundosRestantes = Math.floor(segundos % 60);
        return `${minutos}:${segundosRestantes.toString().padStart(2, '0')}`;
    }

    function actualizarTiempo() {
        if (!audio.paused) {
            elementoTiempo.textContent = formatearTiempo(audio.currentTime);
            requestAnimationFrame(actualizarTiempo);
            
            const { duration, currentTime } = audio;
            const progressPercent = (currentTime / duration) * 500;
            document.getElementById("indicador").style.transform = `translateX(${progressPercent}px)`;
        }
    }

    audio.addEventListener('loadedmetadata', () => {
        elementoDuracion.textContent = formatearTiempo(audio.duration);
        actualizarTiempo();
    });
    
    function agregarSemillas() {
    let i = 0;

    function agregarUnaSemilla() {
        if (i < 340) {
            const x = radio * Math.cos(i * angulo * Math.PI / 180);
            const y = radio * Math.sin(i * angulo * Math.PI / 180);

            const semilla = document.createElement('div');
            semilla.classList.add('semilla');
            semilla.style.transform = `translate(${x + 104}px, ${y+1}px)`;
            semillas.appendChild(semilla);

            radio += 0.2;
            i++;

            setTimeout(agregarUnaSemilla, 3);
            }
        }
        agregarUnaSemilla();
    }

    function crearPetalo(index) {
      const isOuterPetal = index < petalCount;
      const rotation = index % petalCount * 40 + (isOuterPetal ? 0 : 15);
      const width = isOuterPetal ? w + 10 : w;
      const height = isOuterPetal ? h + 90 : h + 20;
  
      const petal = document.createElement('div');
      petal.classList.add('petalos');
      petal.style.rotate = `${rotation}deg`;
      petal.style.transform = `translate(${y}px, ${x}px)`;
      petal.style.width = `${width}px`;
      petal.style.height = `${height}px`;
  
      contenedor.appendChild(petal);
    }
  
    function agregarPetalos() {
      if (index < petalCount * 2) {
        crearPetalo(index);
        index++;
        setTimeout(agregarPetalos, 100);
      }
    }
  
    agregarSemillas();
    agregarPetalos();

    var play = `
        <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-play-circle-fill" viewBox="0 0 16 16">
            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814z"/>
        </svg>
    `;

    var pause = `
        <svg  xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-pause-circle-fill" viewBox="0 0 16 16">
            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5m3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5"/>
        </svg>
    `;

    var icon = "pause";
    cambiar();

    function cambiar() {
        if (icon == "pause") {
            document.getElementById("icono").innerHTML = play;
            icon = "play";
            audio.pause();
        } else if (icon == "play") {
            document.getElementById("icono").innerHTML = pause;
            icon = "pause";
            audio.play();
            actualizarTiempo();
        }
    }
  </script>
</html>
